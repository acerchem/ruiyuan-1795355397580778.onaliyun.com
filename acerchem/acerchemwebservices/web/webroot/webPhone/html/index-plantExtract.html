<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="apple-mobile-web-app-capable" content="no">
    <meta name="format-detection" content="telephone=no">
	<script src="../js/jquery-2.1.1.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/swiper.min.js"></script>
	<script src="../js/acerchem.js"></script>
	<script src="../js/jquery.cookie.js"></script>
	<script src="../js/style.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/style-style.css">
</head>
<body>
	<div class="g-main g-gallery">
		<div class="header bort-bot">
			<div class="m-left">
				<a href="javascript:history.back()"></a>
			</div>
			<div class="m-center search">
				<form action="gallery.html">
					<input type="text" class="key" name="key" placeholder="SEARCH">
					<button type="submit" class="btn i-search" ><i></i></button>
				</form> 
			</div>
		</div>
		
		<!--con-->
		<div class="m-gallery">
			<ul id="myTab" class="tabs bort-bot nav nav-tabs">
			    <li class="gall-price name" data-name="">
			        <a href="#name" data-toggle="tab">
			            Name
			            <b class="caret"></b>
			        </a>
			    </li>
				<li class="g-menu-nav"><a href="#name" data-toggle="tab">Filter<b class="i-filter"></b></a></li>
				
			</ul>
			<div id="myTabContent" class="swiper-gall">
			    <div class="tab-pane fade in active" id="relevance">
			       <ul id="productLists">
			       
			       </ul>
			    </div>
			</div>
		</div>
		<!--con end-->
		
		<div class="maxnav bort-top">
			<ul>
				<li class="item-1">
					<a href="index.html">
						<i></i>
						<span>home</span>
					</a>
				</li>
				<li class="item-2">
					<a href="gallery.html" class="active">
						<i></i>
						<span>goods</span>
					</a>
				</li>
				<li class="item-4">
					<a href="sign.html">
						<i></i>
						<span>member</span>
					</a>
				</li>
			</ul>
		</div>

	</div>
</body>

<script type="text/javascript">
// 排序
(function(){
	$.ajax({
        url:homeUrl+"/products/category2/575",
        type:"get",
        dataType: "json",
        async: true,
        crossDomain: true,
        beforeSend: function(request) {
            request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            request.setRequestHeader("Authorization", $.cookie("access_token"));
        },
        success:function(returndata){
            //console.log("success:"+JSON.stringify(returndata));
            var html='';
            var products=returndata.products;
            for(var i = 0; i < products.length; i++){
        		html+='<li data-name="' + products[i].name + '"><div class="maximg"><a href="product.html?code='+products[i].code+'">';
                 if(products[i].images != null) {
                 	html+='<img src="'+products[i].images[0].url.substring(23)+'"></a></div><div class="text g-price"><a href="product.html?code='+products[i].code+'"><p>'+products[i].name+'</p><div class="price"><span>';
                 }else {
                 	html+='<img src=""></a></div><div class="text g-price"><a href="product.html?code='+products[i].code+'"><p>'+products[i].name+'</p><div class="price"><span>';
                 }
                
                 if(products[i].promotionPrice!=null){
                     html+=products[i].promotionPrice.formattedValue + '</span><em>';
                 }else{
                     html+='</span><em>';
                 }
                 
                 if(products[i].price!=null){
                     html+=products[i].price.formattedValue+'</em></div></a></div></li>'
                 }else{
                     html+='</em></div></a></div></li>'
                 }
            }
            $("#productLists li").remove();
            $("#productLists").append(html); 
        },
        error:function(returndata){
            console.log("error:"+JSON.stringify(returndata));
        }
    });
	
	$('.gall-price').on('click',function(){
		var arr=[];
		var item = $('#relevance ul li');
		
		$.each(item,function(index,item){		
			arr.push($(item).find('p').text());
		})
		arr.sort();
		
		if($(this).hasClass('name')){
			var data = $(this).attr('data-name');

			if(data != 'top'){
				$(this).attr('data-name','top');
				for(var i=0;i<arr.length;i++){
					$('#relevance ul').append($('#relevance ul li[data-name="'+arr[i]+'"]'));
				}
			}else{
				$(this).attr('data-name','bottom');
				for(var i=arr.length;i>-1;i--){
					$('#relevance ul').append($('#relevance ul li[data-name="'+arr[i]+'"]'));
				}
			}
		}
	})
})()
</script>
</html>